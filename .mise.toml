[tasks.build]
description = "Build the binary"
run = "go build -o lnr main.go"

[tasks.install]
description = "Build and install the binary"
run = """
echo "Building lnr..."
go build -o lnr main.go
echo "Installing to ~/.local/bin/lnr..."
mkdir -p ~/.local/bin
cp lnr ~/.local/bin/
rm lnr
echo "‚úÖ Installation complete!"
echo ""
echo "üìù To add a convenient alias for opening the form in a tmux popup, add this to your ~/.zshrc:"
echo ""
echo "# LNR form in tmux popup"
echo 'lnr() {'
echo '  if [[ -n "$TMUX" ]]; then'
echo '    tmux popup -w 80% -h 80% lnr'
echo '  else'
echo '    lnr'
echo '  fi'
echo '}'
echo ""
echo "Then run: source ~/.zshrc"
echo
echo "You can also add a tmux bindings to your tmux config:"
echo
echo '  bind-key "i" display-popup -E -w 80% -h 80% lnr '
echo
echo 'And you can map a key in Ghostty to launch the tmux shortcut:'
echo
echo '  # create a new linear issue'
echo '  keybind = super+shift+i=text:\\x1ai'
echo
"""

[tasks.clean]
description = "Clean build artifacts"
run = "rm -f lnr"

[tasks.uninstall]
description = "Uninstall the dev version"
run = """
if [ -f ~/.local/bin/lnr ]; then
  rm ~/.local/bin/lnr
  echo "‚úÖ Uninstalled ~/.local/bin/lnr"
else
  echo "‚ÑπÔ∏è  lnr is not installed in ~/.local/bin"
fi
"""

[tasks.run]
description = "Run without building"
run = "go run main.go"

[tasks.deps]
description = "Download dependencies"
run = "go get github.com/charmbracelet/huh"

[tasks.info]
description = "Show version info"
run = """
echo "Linear Ticket Form"
echo "=================="
go version
"""

[tools]
go = "1.25.3"
goreleaser = "2"
